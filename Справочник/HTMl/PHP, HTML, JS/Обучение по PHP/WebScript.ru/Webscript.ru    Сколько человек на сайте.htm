<html><script language="JavaScript" type="text/javascript"> window.onerror=new Function("return true;"); </script><HEAD><TITLE>Webscript.ru :: веб программирование для всех.</TITLE>
<META http-equiv=Content-Type content="text/html; charset=windows-1251">
<META http-equiv=Content-Language content=ru>
<META content="Hands v. 2.0" name=generator>
<META content="Каталог скриптов (PHP &amp; Perl), хостинг, бесплатные скрипты, Форумы, счетчики, поиск, голосования, гостевые книги, новости, чаты, статистика, ссылки, возвратные формы, перл, цги, perl,php,php3,mysql, webmaster, вебмастер, free" name=keywords>
<META content="Каталог скриптов (PHP &amp; Perl). Аналитические статьи. Новости для вебмастеров. Большой форум. Аукцион. Бесплатные скрипты." name=description><LINK href="Webscript.ru    Сколько человек на сайте-Dateien\csblank.gif" rel=stylesheet>

</HEAD>
<BODY text=#000000 bgColor=#cccccc leftMargin=0 topMargin=0 marginheight="0" marginwidth="0">
<TABLE cellSpacing=0 cellPadding=0 width="100%" bgColor=black border=0>
<TBODY>
<TR>
<TD width=278><A href="http://www.webscript.ru"><IMG height=55 alt=WebScript.Ru hspace=5 src="Webscript.ru    Сколько человек на сайте-Dateien\csblank.gif" width=268 vspace=15 border=0></A></TD><!-- Ушки -->
<TD><IMG height=1 alt="" src="Webscript.ru    Сколько человек на сайте-Dateien\csblank.gif" width=15></TD>
<TD align=left width=510 background="Webscript.ru    Сколько человек на сайте-Dateien\bg1.gif"><IFRAME id=a1af6a68 name=a1af6a68 frameSpacing=0 src="Webscript.ru    Сколько человек на сайте-Dateien\adframe.php.htm" frameBorder=no width=468 scrolling=no height=60><a href='http://base.webscript.ru/adclick.php?n=a1af6a68' target='_blank'><img src="Webscript.ru    Сколько человек на сайте-Dateien\468-autumn-01_2.gif" border='0' alt=''></a></IFRAME></TD>
<TD><IMG height=1 alt="" src="http://www.webscript.ru/p.gif" width=2>
<TD width=1 bgColor=white><IMG height=1 alt="" src="http://www.webscript.ru/p.gif" width=1></TD>
<TD width="99%" bgColor=#555555></TD></TR></TBODY></TABLE><!-- Таблица с меню -->
<TABLE cellSpacing=0 cellPadding=0 width="100%" bgColor=#dddddd border=0>
<TBODY>
<TR>
<TD><IMG height=2 alt="" src="http://www.webscript.ru/p.gif" width=1></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=2 width="100%" bgColor=black border=0>
<TBODY>
<TR>
<TD class=mnu><FONT color=red>C:\&nbsp; <A class=mnu href="http://www.webscript.ru/">&nbsp;главная&nbsp;</A> :: <A class=mnu href="http://www.webscript.ru/pages.php3?page=О+сайте">&nbsp; о сайте&nbsp;</A> :: <A class=mnu href="http://www.webscript.ru/scripts">&nbsp;каталог скриптов&nbsp;</A> :: <A class=mnu href="http://gnezdo.webscript.ru/">&nbsp;гнездо&nbsp;</A> :: <A class=mnu href="http://hostobzor.webscript.ru/">&nbsp;хостОбзор&nbsp;</A> :: <A class=mnu href="http://forums.webscript.ru">&nbsp;форум&nbsp;</A> :: <A class=mnu href="http://www.webscript.ru/pages.php3?page=Авторам">&nbsp; авторам&nbsp;</A> :: <A class=mnu title="Реклама на Webscript.ru" href="http://webscript.ru/stat/click.php?http://www.webscript.ru/pages.php3?page=Advertisment">Реклама </A>:: <A class=mnu title="Виртуальные выделенные сервера от 4.95$" href="http://webscript.ru/click/fclick.php?fid=1">&nbsp; ХОСТИНГ&nbsp;</A> :: </FONT></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" bgColor=#999999 border=0>
<TBODY>
<TR>
<TD><IMG height=2 alt="" src="http://www.webscript.ru/p.gif" width=1></TD></TR></TBODY></TABLE><!-- Главная таблица -->
<TABLE cellSpacing=0 cellPadding=0 width=760 bgColor=white border=0>
<TBODY>
<TR><!-- Колонка слева -->
<TD vAlign=top width=200 bgColor=#f0f0f0><IMG height=7 alt="" src="http://www.webscript.ru/p.gif" width=200><BR><!-- Разделы -->
<TABLE cellSpacing=0 cellPadding=0 width=200 bgColor=#cccccc border=0>
<TBODY>
<TR>
<TD class=mnu vAlign=top background="Webscript.ru    Сколько человек на сайте-Dateien\bg5.gif"><IMG height=14 alt="" src="Webscript.ru    Сколько человек на сайте-Dateien\a1.gif" width=20 align=left border=0> || разделы::</TD></TR>
<TR>
<TD width=200 background="Webscript.ru    Сколько человек на сайте-Dateien\bg2.gif" bgColor=white>
<DIV class=maintext><B>:: <A href="http://www.webscript.ru/stories.php3?topic=2">новости сайта</A><BR>:: <A href="http://www.webscript.ru/stories.php3?topic=3">новости Perl</A><BR>:: <A href="http://www.webscript.ru/stories.php3?topic=5">статьи по Perl</A><BR>:: <A href="http://www.webscript.ru/stories.php3?topic=4">новости PHP</A><BR>:: <A href="http://www.webscript.ru/stories.php3?topic=6">статьи по PHP</A><BR>:: <A href="http://www.webscript.ru/stories.php3?topic=7">веб-технологии</A><BR>:: <A href="http://www.webscript.ru/stories.php3?topic=8">публикации</A><BR>
<HR>
:: <A href="http://www.webscript.ru/sanitarium">Sanitarium WebLoG</A><BR>:: <A href="http://www.webscript.ru/mp">MobilePublisherPHP</A><BR></B></DIV></TD></TR></TBODY></TABLE><!-- Новости -->
<TABLE cellSpacing=0 cellPadding=0 width=200 bgColor=#cccccc border=0>
<TBODY>
<TR>
<TD class=mnu vAlign=top background="Webscript.ru    Сколько человек на сайте-Dateien\bg5.gif"><IMG height=14 alt="" src="Webscript.ru    Сколько человек на сайте-Dateien\a1.gif" width=20 align=left border=0> || новости почтой::</TD></TR>
<TR>
<TD width=200 bgColor=white>
<DIV class=verd>
<FORM action=http://subscribe.ru/member/quick method=get target=_top><INPUT type=hidden value=quick name=action> <B>Рассылки <A href="http://subscribe.ru/">Subscribe.Ru</A> ::</B><BR><BR><INPUT class=frm maxLength=100 size=15 value="ваш e-mail" name=email> <INPUT class=frm type=submit value=Ok><BR><BR><INPUT class=frm type=checkbox CHECKED value=inet.webbuild.webscript name=grp> Новости сайта WebScript.Ru </FORM></DIV></TD></TR></TBODY></TABLE><!-- поиск -->
<TABLE cellSpacing=0 cellPadding=0 width=200 bgColor=#cccccc border=0>
<TBODY>
<TR>
<TD class=mnu vAlign=top background="Webscript.ru    Сколько человек на сайте-Dateien\bg5.gif"><IMG height=14 alt="" src="Webscript.ru    Сколько человек на сайте-Dateien\a1.gif" width=20 align=left border=0> || поиск по сайту::</TD></TR>
<TR>
<TD width=200 bgColor=white>
<DIV class=verd align=right>
<FORM action=http://www.webscript.ru/search.php3 method=get><B>Искать</B>:<INPUT class=frm maxLength=35 size=18 name=query><BR><B>где :</B> <SELECT class=frm name=topic> <OPTION value=0 selected>Все разделы</OPTION> <OPTION value=3>Новости Perl</OPTION> <OPTION value=2>Новости сайта</OPTION> <OPTION value=4>Новости PHP</OPTION> <OPTION value=5>Статьи по Perl</OPTION> <OPTION value=6>Статьи по PHP</OPTION> <OPTION value=7>Веб-технологии</OPTION> <OPTION value=8>Публикации</OPTION></SELECT><BR>статьи <INPUT type=radio CHECKED value=stories name=what><BR>комментарии <INPUT type=radio value=comments name=what><BR><BR>Результатов: <SELECT class=frm name=limit> <OPTION value=10>10</OPTION> <OPTION value=20>20</OPTION> <OPTION value=30 selected>30</OPTION> <OPTION value=40>40</OPTION> <OPTION value=50>50</OPTION></SELECT> <INPUT class=frm type=submit value=" Ok "> </FORM><BR></DIV></TD></TR></TBODY></TABLE><!-- begin blocks column (l) //--><!-- BLOCK START default -->
<TABLE cellSpacing=0 cellPadding=0 width=200 bgColor=#cccccc border=0>
<TBODY>
<TR>
<TD class=mnu vAlign=top background="Webscript.ru    Сколько человек на сайте-Dateien\csblank.gif"><IMG height=14 alt="" src="Webscript.ru    Сколько человек на сайте-Dateien\csblank.gif" width=20 align=left border=0>|| Nавигатор</TD></TR>
<TR>
<TD width=200 bgColor=#f5f5f5>


<UL>
<LI><A href="http://forums.webscript.ru/showthread.php?s=&threadid=15178">MySQL 5 beta</A>
<LI><A href="http://forums.webscript.ru/showthread.php?s=&threadid=15144">[bug] IE bug, позволяющий подменить URL in Location</A>
<LI><A href="http://forums.webscript.ru/showthread.php?s=&threadid=14237">[site] кУ/Роводство и проверка орфографии</A>
<LI><A href="http://forums.webscript.ru/showthread.php?s=&threadid=14177">[news] Mozilla 1.5 out (остальные из семейства - тоже)</A>
<LI><A href="http://forums.webscript.ru/showthread.php?s=&threadid=14070">[fun] Google крут! :)</A>
<LI><A href="http://forums.webscript.ru/showthread.php?s=&threadid=13692&msgnum=0">[news] разные новости </A>
<LI><A href="http://forums.webscript.ru/showthread.php?s=&threadid=13514">[news] Протест против патентов на ПО в Европе</A>
<LI><A href="http://forums.webscript.ru/showthread.php?s=&threadid=13344">[soft] PHP " " Mozilla "-" Web server ! :)</A>
<LI><A href="http://forums.webscript.ru/showthread.php?s=&threadid=13033">Вышел Win2k SP4 (ru)!</A>
<LI><A href="http://forums.webscript.ru/showthread.php?s=&threadid=12804&msgnum=0">[soft] OpenGroupware - Свершилось! Альтернатива MS Exchange</A></LI></UL><BR><BR></TD></TR></TBODY></TABLE><!-- BLOCK END --><!-- BLOCK START default -->
<TABLE cellSpacing=0 cellPadding=0 width=200 bgColor=#cccccc border=0>
<TBODY>
<TR>
<TD class=mnu vAlign=top background="http://www.webscript.ru/stories/02/02/01/img/bg5.gif"><IMG height=14 alt="" src="http://www.webscript.ru/stories/02/02/01/img/a1.gif" width=20 align=left border=0>Популярные статьи</TD></TR>
<TR>
<TD width=200 bgColor=#f5f5f5>
<UL>
<LI><A href="http://www.webscript.ru/stories/01/05/31/4704330">Введение в PHP</A> (28) 
<LI><A href="http://www.webscript.ru/stories/01/06/06/8148134">Форум, работающий с базой данных MySQL</A> (29) 
<LI><A href="http://www.webscript.ru/stories/01/06/18/2730108">Аутентификация пользователей через Веб-интерфейс</A> (22) 
<LI><A href="http://www.webscript.ru/stories/01/06/08/4295014">Отправка писем через PHP</A> (53) 
<LI><A href="http://www.webscript.ru/stories/02/05/06/5105096">Гостевая книга на PHP/MySQL</A> (17) </LI></UL><BR></TD></TR></TBODY></TABLE><!-- BLOCK END --><!-- end blocks column (l) //--><!-- кнопки -->
<TABLE cellSpacing=0 cellPadding=0 width=200 bgColor=#cccccc border=0>
<TBODY>
<TR>
<TD class=mnu vAlign=top background="Webscript.ru    Сколько человек на сайте-Dateien\bg5.gif"><IMG height=14 alt="" src="Webscript.ru    Сколько человек на сайте-Dateien\a1.gif" width=20 align=left border=0> || рекомендуем::</TD></TR>
<TR>
<TD width=200 bgColor=white>
<DIV align=center>
<CENTER><BR><A href="http://ricn.ru/"><IMG height=31 alt="Здесь живет Моська Рунета !" src="Webscript.ru    Сколько человек на сайте-Dateien\88moska2.gif" width=88 border=0></A> <A href="http://www.proge.ru/"><IMG height=31 alt="Библиотека программиста" src="Webscript.ru    Сколько человек на сайте-Dateien\prog.gif" width=88 border=0></A> <BR><A href="http://www.searchengines.ru/"><IMG height=31 alt="Поисковые системы, оптимизация и раскрутка сайта" src="Webscript.ru    Сколько человек на сайте-Dateien\se31.gif" width=88 border=0></A> </A><BR><A href="http://www.21vek.ru/web/notebook.jsp">Ноутбуки 21Века</A> </CENTER></DIV></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" bgColor=black border=0>
<TBODY>
<TR>
<TD><IMG height=1 alt="" src="http://www.webscript.ru/p.gif" width=1></TD></TR></TBODY></TABLE><BR><BR><!-- Правая колонка --></TD>
<TD width=1 bgColor=black><IMG height=1 alt="" src="http://www.webscript.ru/p.gif" width=1></TD>
<TD vAlign=top width=560><!-- Баннер --><BR>
<BLOCKQUOTE>



<A href="http://base.webscript.ru/adclick.php?bannerid=75&zoneid=3&source=&dest=http://www.books.ru/shop/books/21009?partner=nas" target=_blank><B>[XSLT. Справочник программиста (2-е издание)]</B><BR>Данная книга призвана заполнить пробел в литературе по XSLT, поскольку до сих пор необходимую информацию можно почерпнуть лишь в официальной спецификации W3C, которая, по мнению автора, "примерно так же читабельна для большинства программистов, как страницы налогового законодательства".</A>
<DIV id=beacon_75 style="LEFT: 0px; VISIBILITY: hidden; POSITION: absolute; TOP: 0px"><IMG style="WIDTH: 0px; HEIGHT: 0px" height=0 alt="" src="Webscript.ru    Сколько человек на сайте-Dateien\adlog.php.gif" width=0></DIV><NOSCRIPT><a href='http://base.webscript.ru/adclick.php?n=aed8abce'><img src="Webscript.ru    Сколько человек на сайте-Dateien\adview.php.gif" border='0' alt=''></a></NOSCRIPT></BLOCKQUOTE><!-- STORY START default --><!-- Блок с анонсом -->
<TABLE cellSpacing=0 cellPadding=20 width=560 bgColor=white border=0>
<TBODY>
<TR>
<TD>
<H1>Сколько человек на сайте??</H1><BR>
<DIV align=right><SMALL>Прислал: <B><SPAN class=author><A href="http://www.webscript.ru/profiles.php3?Author=Tankist&AuthorEmail=yerny@xz.eh&AuthorURL=http://lreal.km.ru">Tankist</A></SPAN></B> [ 01.02.2002 @ 12:33 ]<BR>Раздел:: [ <B><A href="http://www.webscript.ru/stories.php3?topic=6">Статьи по PHP</A></B> ]</SMALL><BR></DIV><BR>Недавно на webscript.ru была опубликована статья <A href="http://www.webscript.ru/stories/02/01/26/6213672">Сколько человек на сайте?</A>, однако у нее был один недостаток: она определяла пользователя по IP. Почему этот метод плохой? Давайте подумаем:<BR>
<P>1. Некоторые провайдеры обязывают свои клиентов пользоваться прокси-серверами, а теперь подумайте: что останется в переменной REMOTE_ADDR? Правильно: адрес прокси-сервера! А если на сайт зайдут несколько пользователей одного провайдера, скрипт будет думать что это один и тот же юзер. 
<P>2. Некоторые провайдеры, которые предоставляют доступ по кабельным сетям, время от времени меняют IP-адреса пользователей. 
<P>К сожалению, когда Тим Бернерс Ли в 91 году разрабатывал протокол HTTP, он хотел сделать его очень быстрым, поэтому удалил всю информацию о состоянии, чем прибавил работы веб-разработчикам.<BR>Итак, от слов к делу..<BR>Что нам понадобится для работы:<BR>1. База данных mysql<BR>2. PHP4<BR>Создадим таблицу www_online: <BR>CREATE TABLE www_online (<BR>hid int(11) NOT NULL auto_increment,<BR>sess_id char(255) NOT NULL default '',<BR>last_time char(255) NOT NULL default '',<BR>PRIMARY KEY (hid)<BR>) TYPE=MyISAM;<BR><BR>В этой базе мы будем хранить соответственно:<BR>Hid – ID, просто так?<BR>Sess_id – ID сессии пользователя<BR>Last_time – Время последней активности пользователя в секундах с начала эпохи (1970 г.).<BR>Теперь код функции:<BR><BR>function show_online_user() {<BR>global $database; //Импортируем массив с данными mysql<BR>session_start(); //Начинаем сессию<BR>session_set_cookie_params("0"); //Задаем время жизни куки<BR>$id=session_id(); $time=time(); $past=time()-500; //Переменные(id - id сессии, time-текущее время, <BR>past-время, после которого надо удалять сессии).<BR>$link=mysql_connect($database[dbserv], $database[dbuser], $database[dbpass]); //Коннектимся к базе данных<BR>mysql_select_db($database[dbname]); //Выбираем базу данных<BR>mysql_query("DELETE FROM www_online WHERE last_time &lt; '$past'"); //Удаляем старые сессии<BR>$result=mysql_query("SELECT last_time FROM www_online WHERE sess_id='$id'"); //Выбираем таблицу<BR>$rows=mysql_num_rows($result); //Если в таблице есть sess_id с $id, то равно 1, иначе 0<BR>if ($rows!="0") {<BR>mysql_query("UPDATE www_online SET last_time='$time' WHERE sess_id='$id'");<BR>} else {<BR>mysql_query("INSERT INTO www_online (last_time, sess_id) VALUES ('$time', '$id')");<BR>}<BR>$result = mysql_query("SELECT * FROM www_online"); //Выбираем все сессии<BR>$count = mysql_num_rows($result); //Считаем число сессий<BR>return "Сейчас на сайте $count человек(а)"; //Возвращаем число юзеров<BR>mysql_close($link); //Закрываем коннект с mysql<BR>}<BR>Вот такая простая функция, решающая большую проблему.<BR><BR>Действие фунции можете посмотреть на развивающемся игровом портале <A href="http://lreal.km.ru">http://lreal.km.ru</A>.<BR>-------------------- С уважением, Смирнов Никита aka Tankist<BR><A href="mailto:lreal@km.ru">lreal@km.ru</A> icq: 147106412<BR><A href="http://lreal.km.ru">http://lreal.km.ru</A> <BR><BR>
<DIV align=right><SMALL><B>[ <A href="http://www.webscript.ru/print/02/02/01/6006190" target=_blank>Распечатать</A> ]::[ <A href="http://www.webscript.ru/friend/02/02/01/6006190">Переслать</A> ]::[ <A href="http://forums.webscript.ru">Обсудить</A> ]</B></SMALL></DIV>
<DIV></DIV><BR>
<DIV align=right><SMALL><B></B></SMALL></DIV></TD></TR></TBODY></TABLE><!-- STORY END -->
<DIV class=maintext align=right><B><U></U></B></DIV><!-- COMMENT START default -->
<TABLE cellSpacing=0 cellPadding=2 width="100%" border=0>
<TBODY>
<TR>
<TD class=mnu bgColor=#bbbbbb>&nbsp;:::::&nbsp;&nbsp;<A href=""><A href="http://www.webscript.ru/profiles.php3?Author=Mika+Turin&AuthorEmail=gheva@vaobk.yi&AuthorURL=">Mika Turin</A></A> пишет 07.02.2002 @ 12:08</TD>
<TD class=verd align=right width=150 bgColor=#f0f0f0>&nbsp;</TD></TR></TBODY></TABLE>
<TABLE cellSpacing=10 cellPadding=0 width="100%" bgColor=white border=0>
<TBODY>
<TR>
<TD>
<DIV class=txt31 align=justify>Kak i pervij tak i vtoroj variant ne daet polnuju tochnostj pri podschete kolichestva poljzovatelej na saite. V pervom daet oshibku IP. A vo vtorom, "cookie", tak kak ispoljzovanie "cookies" vkljucheno ne vo vseh browserah. Posetitili s otkluchenimu kykami budut ne vidni dlja etoj sistemi.<BR><BR>P.S. kak priviljno shitatj sam eche ne pridulal, no shitatj nado i po IP i po cookies.<BR></DIV></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" bgColor=black border=0>
<TBODY>
<TR>
<TD><IMG height=1 alt="" src="Webscript.ru    Сколько человек на сайте-Dateien\csblank.gif" width=1></TD></TR></TBODY></TABLE><!-- COMMENT END --><!-- COMMENT START default -->
<TABLE cellSpacing=0 cellPadding=2 width="100%" border=0>
<TBODY>
<TR>
<TD class=mnu bgColor=#bbbbbb>&nbsp;:::::&nbsp;&nbsp;<A href=""><A href="http://www.webscript.ru/profiles.php3?Author=duncan&AuthorEmail=&AuthorURL=">duncan</A></A> пишет 07.02.2002 @ 12:52</TD>
<TD class=verd align=right width=150 bgColor=#f0f0f0>&nbsp;</TD></TR></TBODY></TABLE>
<TABLE cellSpacing=10 cellPadding=0 width="100%" bgColor=white border=0>
<TBODY>
<TR>
<TD>
<DIV class=txt31 align=justify>а какой смысл хранить $time в char(255)?<BR>когда для этого есть тип int, да и выборка в этом случае будет на порядок быстрее.<BR><BR>А вообще считать посетителей онлайн это дело неблагодарное,<BR>с таким же успехом можно выводить просто случайное число :)))) Точность та же<BR></DIV></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" bgColor=black border=0>
<TBODY>
<TR>
<TD><IMG height=1 alt="" src="http://www.webscript.ru/stories/02/02/01/p.gif" width=1></TD></TR></TBODY></TABLE><!-- COMMENT END --><!-- COMMENT START default -->
<TABLE cellSpacing=0 cellPadding=2 width="100%" border=0>
<TBODY>
<TR>
<TD class=mnu bgColor=#bbbbbb>&nbsp;:::::&nbsp;&nbsp;<A href=""><A href="http://www.webscript.ru/profiles.php3?Author=Tankist&AuthorEmail=yerny@xz.eh&AuthorURL=Http://lreal.km.ru">Tankist</A></A> пишет 07.02.2002 @ 17:32</TD>
<TD class=verd align=right width=150 bgColor=#f0f0f0>&nbsp;</TD></TR></TBODY></TABLE>
<TABLE cellSpacing=10 cellPadding=0 width="100%" bgColor=white border=0>
<TBODY>
<TR>
<TD>
<DIV class=txt31 align=justify>duncan:)<BR>По поводу mysql: не придерайся:)<BR>Случайное число?Типа 13243545?:))<BR></DIV></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" bgColor=black border=0>
<TBODY>
<TR>
<TD><IMG height=1 alt="" src="http://www.webscript.ru/stories/02/02/01/p.gif" width=1></TD></TR></TBODY></TABLE><!-- COMMENT END --><!-- COMMENT START default -->
<TABLE cellSpacing=0 cellPadding=2 width="100%" border=0>
<TBODY>
<TR>
<TD class=mnu bgColor=#bbbbbb>&nbsp;:::::&nbsp;&nbsp;<A href=""><A href="http://www.webscript.ru/profiles.php3?Author=BarmaLINI&AuthorEmail=qrfvta@onezn.yivi.hn&AuthorURL=http://www.ce.lviv.ua">BarmaLINI</A></A> пишет 08.02.2002 @ 11:14</TD>
<TD class=verd align=right width=150 bgColor=#f0f0f0>&nbsp;</TD></TR></TBODY></TABLE>
<TABLE cellSpacing=10 cellPadding=0 width="100%" bgColor=white border=0>
<TBODY>
<TR>
<TD>
<DIV class=txt31 align=justify>По поводу REMOTE_ADDR, вот кусочек кода с моего портала <A href="http://www.ce.lviv.ua" target=_blank>http://www.ce.lviv.ua</A><BR>работает без проблем за прокси :о) (разве что прокси закрытыми бывают - запрет определения локального адреса)<BR><BR>if ($HTTP_X_FORWARDED_FOR != "" )<BR>{<BR>$pip = $HTTP_X_FORWARDED_FOR;<BR>$phost = @gethostbyaddr($HTTP_X_FORWARDED_FOR);<BR>$ip = $REMOTE_ADDR;<BR>$host = @gethostbyaddr($REMOTE_ADDR);<BR>}<BR>else<BR>{<BR>$pip = "";<BR>$phost = "";<BR>$ip = $REMOTE_ADDR;<BR>$host = @gethostbyaddr($REMOTE_ADDR);<BR>}<BR><BR></DIV></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" bgColor=black border=0>
<TBODY>
<TR>
<TD><IMG height=1 alt="" src="http://www.webscript.ru/stories/02/02/01/p.gif" width=1></TD></TR></TBODY></TABLE><!-- COMMENT END --><!-- COMMENT START default -->
<TABLE cellSpacing=0 cellPadding=2 width="100%" border=0>
<TBODY>
<TR>
<TD class=mnu bgColor=#bbbbbb>&nbsp;:::::&nbsp;&nbsp;<A href=""><A href="http://www.webscript.ru/profiles.php3?Author=Tankist&AuthorEmail=yerny@xz.eh&AuthorURL=http://lreal.km.ru">Tankist</A></A> пишет 09.02.2002 @ 22:59</TD>
<TD class=verd align=right width=150 bgColor=#f0f0f0>&nbsp;</TD></TR></TBODY></TABLE>
<TABLE cellSpacing=10 cellPadding=0 width="100%" bgColor=white border=0>
<TBODY>
<TR>
<TD>
<DIV class=txt31 align=justify>session_set_cookie_params("0");<BR>-<BR>надо так:<BR>session_set_cookie_params(time()+3600);<BR></DIV></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" bgColor=black border=0>
<TBODY>
<TR>
<TD><IMG height=1 alt="" src="http://www.webscript.ru/stories/02/02/01/p.gif" width=1></TD></TR></TBODY></TABLE><!-- COMMENT END --><!-- COMMENT START default -->
<TABLE cellSpacing=0 cellPadding=2 width="100%" border=0>
<TBODY>
<TR>
<TD class=mnu bgColor=#bbbbbb>&nbsp;:::::&nbsp;&nbsp;<A href=""><A href="http://www.webscript.ru/profiles.php3?Author=ECTb&AuthorEmail=rpgo@pjt.eh&AuthorURL=www.cwg.ru">ECTb</A></A> пишет 19.02.2002 @ 22:59</TD>
<TD class=verd align=right width=150 bgColor=#f0f0f0>&nbsp;</TD></TR></TBODY></TABLE>
<TABLE cellSpacing=10 cellPadding=0 width="100%" bgColor=white border=0>
<TBODY>
<TR>
<TD>
<DIV class=txt31 align=justify>2BarmaLINI: HTTP_X_FORWARDED_FOR, как и HTTP_VIA_PROXY вообще лучше не трогать! ;) т.к. в эти переменные можно запихнуть все что угодно, можно запихнуть туда чужой IP, а можно и текст любой.<BR></DIV></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" bgColor=black border=0>
<TBODY>
<TR>
<TD><IMG height=1 alt="" src="http://www.webscript.ru/stories/02/02/01/p.gif" width=1></TD></TR></TBODY></TABLE><!-- COMMENT END --><!-- COMMENT START default -->
<TABLE cellSpacing=0 cellPadding=2 width="100%" border=0>
<TBODY>
<TR>
<TD class=mnu bgColor=#bbbbbb>&nbsp;:::::&nbsp;&nbsp;<A href=""><A href="http://www.webscript.ru/profiles.php3?Author=laacz&AuthorEmail=&AuthorURL=http://laacz.lv/">laacz</A></A> пишет 20.03.2002 @ 22:02</TD>
<TD class=verd align=right width=150 bgColor=#f0f0f0>&nbsp;</TD></TR></TBODY></TABLE>
<TABLE cellSpacing=10 cellPadding=0 width="100%" bgColor=white border=0>
<TBODY>
<TR>
<TD>
<DIV class=txt31 align=justify>Neponatno, pochemu delat` tormoz:<BR><BR>$result = mysql_query("SELECT * FROM www_online"); //Выбираем все сессии<BR>$count = mysql_num_rows($result); //Считаем число сессий<BR><BR>Nado li zagruzat' bazu dannyh, zastvalyaya selektit' vsje zapisi? Jesli bystree budet<BR><BR>$count = mysql_result(mysql_query("SELECT COUNT(hid) FROM www_online"), 0);<BR></DIV></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" bgColor=black border=0>
<TBODY>
<TR>
<TD><IMG height=1 alt="" src="http://www.webscript.ru/stories/02/02/01/p.gif" width=1></TD></TR></TBODY></TABLE><!-- COMMENT END --><!-- COMMENT START default -->
<TABLE cellSpacing=0 cellPadding=2 width="100%" border=0>
<TBODY>
<TR>
<TD class=mnu bgColor=#bbbbbb>&nbsp;:::::&nbsp;&nbsp;<A href=""><A href="http://www.webscript.ru/profiles.php3?Author=Ruslan&AuthorEmail=erovfnyy@znvy.eh&AuthorURL=">Ruslan</A></A> пишет 16.01.2003 @ 17:48</TD>
<TD class=verd align=right width=150 bgColor=#f0f0f0>&nbsp;</TD></TR></TBODY></TABLE>
<TABLE cellSpacing=10 cellPadding=0 width="100%" bgColor=white border=0>
<TBODY>
<TR>
<TD>
<DIV class=txt31 align=justify>А почему вы не хотите использовать вместо кукисов работу с сессиями в пхп очень хорошая вещь ???<BR></DIV></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" bgColor=black border=0>
<TBODY>
<TR>
<TD><IMG height=1 alt="" src="http://www.webscript.ru/stories/02/02/01/p.gif" width=1></TD></TR></TBODY></TABLE><!-- COMMENT END --><!-- MAIN START default -->
<TABLE cellSpacing=10 cellPadding=0 width="100%" bgColor=#f0f0f0 background="Webscript.ru    Сколько человек на сайте-Dateien\bg6.gif" border=0>
<TBODY>
<TR>
<TD class=mnu align=right background=""><A name=comments></A>
<FORM name=Com onsubmit="return validateComment()" action=http://www.webscript.ru/submit.php3 method=post>Имя: <INPUT class=frm maxLength=32 size=32 name=Author><BR>Email: <INPUT class=frm maxLength=96 size=32 name=AuthorEmail><BR>URL<INPUT class=frm maxLength=96 size=32 name=AuthorURL><BR>Запомнить мою информацию<INPUT type=checkbox name=save> <BR><TEXTAREA class=frm style="WIDTH: 100%" name=Content rows=10 wrap=physical cols=50></TEXTAREA><BR>* Html запрещен* Ваш E-mail опубликован не будет.<INPUT type=hidden value=comment name=what> <INPUT type=hidden value=02/02/01/6006190 name=ParentRid> <INPUT type=hidden value=02/02/01/6006190 name=TopRid> <INPUT type=hidden value=stories.php3?story=02/02/01/6006190 name=where> <INPUT class=frm style="FONT-WEIGHT: bold; WIDTH: 100%; BACKGROUND-COLOR: #ffff99" type=submit value="Отправить отзыв"> </FORM><BR></TD></TR></TBODY></TABLE><!-- MAIN END --></TD>
<TD width=1 bgColor=black><IMG height=1 alt="" src="http://www.webscript.ru/p.gif" width=1></TD></TR></TBODY></TABLE><!-- реклама -->
<TABLE cellSpacing=0 cellPadding=0 width=762 bgColor=black border=0>
<TBODY>
<TR>
<TD><IMG height=1 alt="" src="http://www.webscript.ru/p.gif" width=762></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=10 width=762 bgColor=#aaaaaa border=0>
<TBODY>
<TR>
<TD></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=10 width=762 bgColor=#bbbbbb border=0>
<TBODY>
<TR>
<TD><!--begin of Top100 logo--><A href="http://top100.rambler.ru/top100/"><IMG height=31 alt="Rambler's Top100" src="Webscript.ru    Сколько человек на сайте-Dateien\banner-88x31-rambler-black2.gif" width=88 border=0></A> <!--end of Top100 logo --></TD>
<TD class=verd align=right>Copyright © 2000-2001 WebScript.Ru <A href="mailto:webmaster@webscript.ru">webmaster@webscript.ru</A><BR>Design © 2001 by <A href="http://parallax.nsk.su">Parallax Design Studio</A> (aka <A href="http://spectator.ru">Spectator.ru</A>)<BR>Все торговые марки и авторские права на эту страницу принадлежат их соответствующим владельцам.<BR><A href="http://top100.rambler.ru/top100/"><IMG height=1 alt="Rambler's Top100" src="Webscript.ru    Сколько человек на сайте-Dateien\top100.cnt.gif" width=1 border=0></A> Сгенерировано&nbsp;за:&nbsp;0.0709488</TD></TR></TBODY></TABLE></BODY></HTML>